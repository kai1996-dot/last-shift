<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>LAST SHIFT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: monospace;
}

#game {
  width: 320px;
  height: 320px;
  margin: 40px auto;
  background: #111;
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  grid-template-rows: repeat(10, 1fr);
  border: 4px solid #fff;
}

.cell {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.player { color: #0f0; }
.goal { color: #ff0; }

#pad {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
}
#pad button {
  width: 50px;
  height: 50px;
  margin: 4px;
  font-size: 20px;
}

/* エンディング */
#ending {
  display: none;
  position: fixed;
  inset: 0;
  background: black;
  color: white;
  text-align: center;
  font-size: 28px;
  padding-top: 40vh;
  z-index: 9999;
}
</style>
</head>

<body>

<div id="game"></div>

<div id="pad">
  <div><button onclick="move(0,-1)">▲</button></div>
  <div>
    <button onclick="move(-1,0)">◀</button>
    <button onclick="move(1,0)">▶</button>
  </div>
  <div><button onclick="move(0,1)">▼</button></div>
</div>

<div id="ending">
  THANK YOU FOR PLAYING<br><br>
  ― THE END ―
</div>

<script>
const size = 10;
const game = document.getElementById("game");

const player = { x: 0, y: 0 };
const goal = { x: 9, y: 9 };

function draw() {
  game.innerHTML = "";
  for (let y = 0; y < size; y++) {
    for (let x = 0; x < size; x++) {
      const cell = document.createElement("div");
      cell.className = "cell";

      if (x === player.x && y === player.y) {
        cell.textContent = "@";
        cell.classList.add("player");
      } else if (x === goal.x && y === goal.y) {
        cell.textContent = "G";
        cell.classList.add("goal");
      }

      game.appendChild(cell);
    }
  }
}

function showEnding() {
  document.getElementById("ending").style.display = "block";
  document.removeEventListener("keydown", handleKey);
}

function move(dx, dy) {
  player.x = Math.max(0, Math.min(size - 1, player.x + dx));
  player.y = Math.max(0, Math.min(size - 1, player.y + dy));
  draw();

  if (player.x === goal.x && player.y === goal.y) {
    showEnding();
  }
}

function handleKey(e) {
  if (e.key === "ArrowUp") move(0, -1);
  if (e.key === "ArrowDown") move(0, 1);
  if (e.key === "ArrowLeft") move(-1, 0);
  if (e.key === "ArrowRight") move(1, 0);
}

document.addEventListener("keydown", handleKey);
draw();
</script>

</body>
</html>

